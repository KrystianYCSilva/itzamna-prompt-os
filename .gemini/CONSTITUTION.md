<!--
  Constitution synced from .specify/memory/constitution.md
  Agent: Gemini
  Synced: 2026-02-02 15:45:03
  DO NOT EDIT - Changes will be overwritten on next sync
  To modify, edit .specify/memory/constitution.md and run sync-constitution.ps1 -Direction push
-->

<!--
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                           SYNC IMPACT REPORT                                   â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Version Change: N/A (template) â†’ 1.0.0 (initial ratification)                 â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Modified Principles:                                                           â•‘
â•‘   - [PRINCIPLE_1_NAME] â†’ I. Human-in-the-Loop                                 â•‘
â•‘   - [PRINCIPLE_2_NAME] â†’ II. Skill Modularity                                 â•‘
â•‘   - [PRINCIPLE_3_NAME] â†’ III. Template Canonicity                             â•‘
â•‘   - [PRINCIPLE_4_NAME] â†’ IV. Cognitive Levels                                 â•‘
â•‘   - [PRINCIPLE_5_NAME] â†’ V. Memory System                                     â•‘
â•‘   - (added) â†’ VI. Generation Pipeline                                          â•‘
â•‘   - (added) â†’ VII. Spec-Kit Integration                                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Added Sections:                                                                â•‘
â•‘   - [SECTION_2_NAME] â†’ Cognitive Architecture                                  â•‘
â•‘   - [SECTION_3_NAME] â†’ Human Gate Protocol                                     â•‘
â•‘   - Governance â†’ Fully defined with amendment procedure                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Removed Sections: None                                                         â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Templates Requiring Updates:                                                   â•‘
â•‘   - .specify/templates/plan-template.md âš  pending (Constitution Check gates)  â•‘
â•‘   - .specify/templates/spec-template.md âœ… no changes needed                   â•‘
â•‘   - .specify/templates/tasks-template.md âœ… no changes needed                  â•‘
â•‘   - .specify/templates/agent-file-template.md âœ… no changes needed             â•‘
â•‘   - .specify/templates/checklist-template.md âœ… no changes needed              â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Follow-up TODOs:                                                               â•‘
â•‘   - Update plan-template.md Constitution Check section with specific gates    â•‘
â•‘   - Consider adding principle-specific validation to commands                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-->

# Itzamna PromptOS Constitution

## Core Principles

### I. Human-in-the-Loop

All persistent artifact creation or modification MUST require explicit human approval before commit.

**Rules:**
- Skills, personas, and prompts MUST pass through the Human Gate before being saved
- No autonomous commits to the knowledge base without human review
- Approval options MUST include: approve, edit, reject, cancel
- Rejected artifacts MUST record feedback in MEMORY.md for learning
- Silence is NOT consent; explicit approval is required

**Rationale:** Human oversight ensures quality control and prevents unintended changes to the
knowledge base. This principle is the foundation of safe human-agent collaboration.

### II. Skill Modularity

Every capability MUST be encapsulated as an independent, composable skill unit.

**Rules:**
- Skills MUST be self-contained with all necessary context
- Skills MUST define clear triggers, constraints, and examples
- Skills MUST NOT depend on implicit knowledge or undocumented conventions
- Skills MUST be independently testable via their defined examples
- Personas MUST compose skills via explicit references, not duplication

**Rationale:** Modular skills enable just-in-time loading, reduce context window usage,
and allow independent evolution of capabilities without system-wide changes.

### III. Template Canonicity

All generated artifacts MUST conform to canonical templates with validated structure.

**Rules:**
- Skills MUST use the SKILL.template.md format with required YAML frontmatter
- Personas MUST use the PERSONA.template.md format
- Prompts MUST use the PROMPT.template.md format
- All templates MUST include: metadata, instructions, examples, constraints
- Generated artifacts MUST pass schema validation before Human Gate presentation

**Rationale:** Consistent structure enables automated validation, indexing, and routing.
Templates encode institutional knowledge about effective artifact design.

### IV. Cognitive Levels

All operations MUST be classified into cognitive levels that determine autonomy and approval.

**Rules:**
- **Level 1 (Automatic):** Read-only, boilerplate, formatting - auto-approved
- **Level 2 (Contextual):** Skill creation, modification - requires human approval
- **Level 3 (Strategic):** Persona creation, architecture decisions - requires enhanced review
- Operations MUST NOT be promoted to higher autonomy without explicit governance change
- Level classification MUST be explicit in operation metadata

**Rationale:** Cognitive levels provide graduated autonomy that matches risk to oversight,
enabling efficiency for routine tasks while ensuring scrutiny for consequential decisions.

### V. Memory System

The system MUST maintain four types of persistent memory for effective operation.

**Rules:**
- **Working Memory:** Session context (~10K tokens), ephemeral
- **Episodic Memory:** Interaction history with timestamps, 90-day retention default
- **Semantic Memory:** Knowledge base with embeddings, permanent
- **Procedural Memory:** Skill library indexed by triggers, permanent
- All memory writes MUST include timestamps and provenance
- Memory queries MUST respect retention policies

**Rationale:** Structured memory enables context-aware operation, learning from history,
and efficient skill retrieval without requiring full knowledge base loading.

### VI. Generation Pipeline

All artifact generation MUST follow the standard pipeline: Classify, Research, Generate,
Validate, Approve, Commit.

**Rules:**
- **Classify:** Determine type, domain, and complexity before proceeding
- **Research:** Search existing skills and external sources before generating
- **Generate:** Apply canonical template with researched content
- **Validate:** Verify schema, completeness, and consistency before Human Gate
- **Approve:** Present to human with full context and clear options
- **Commit:** Save, index, and record in episodic memory only after approval
- Pipeline steps MUST NOT be skipped or reordered

**Rationale:** The pipeline ensures consistent quality by separating concerns and
providing multiple checkpoints before artifacts become permanent.

### VII. Spec-Kit Integration

Complex features requiring more than 5 implementation days MUST use the Spec-Kit workflow.

**Rules:**
- Simple skills (<3 days effort): Direct `brain generate` workflow permitted
- Medium complexity (3-5 days): Recommend Spec-Kit, user decides
- Complex features (>5 days): Spec-Kit workflow REQUIRED (`/speckit.specify`)
- Formal systems: Spec-Kit workflow MANDATORY regardless of timeline
- Integration MUST preserve traceability between specs and generated artifacts

**Rationale:** Spec-Kit provides structured planning, research, and task decomposition
that reduces risk for complex implementations and ensures adequate documentation.

## Cognitive Architecture

The system operates on a simplified CoALA (Cognitive Architectures for Language Agents)
model with three processing levels and a global workspace hub.

### Architecture Components

| Component | Function | Implementation |
|-----------|----------|----------------|
| **Global Workspace** | Attention hub, context aggregation | ~10K token working memory |
| **Recall** | Memory access across all 4 types | Query routing by intent |
| **Reason** | LLM-based classification and generation | Primary model + fallback |
| **Act** | Tool execution (search, files, gates) | MCP-compatible interfaces |

### Level Processing Cycles

| Level | Cycle Time | Function | Trigger |
|-------|------------|----------|---------|
| L1 | 100ms-2s | Automatic responses | Formatting, linting, boilerplate |
| L2 | 10-60s | Contextual judgment | Trade-offs, risk detection, generation |
| L3 | 5-15min | Strategic planning | Architecture, personas, roadmaps |

### Operation Classification

Operations MUST be classified before execution:
- Determine cognitive level based on operation type and impact
- Route to appropriate processing cycle
- Apply level-specific approval requirements

## Human Gate Protocol

The Human Gate is the mandatory approval checkpoint for all L2+ artifact modifications.

### Gate States

| State | Description | Timeout | Next Action |
|-------|-------------|---------|-------------|
| `waiting_approval` | Draft ready for review | 24h | Present options |
| `in_review` | Human actively editing | None | Await completion |
| `approved` | Human approved | Immediate | Proceed to commit |
| `rejected` | Human rejected with feedback | Immediate | Record and optionally retry |
| `cancelled` | Process aborted | Immediate | Clean up |

### Presentation Requirements

All Human Gate presentations MUST include:
- Artifact type and proposed action
- Token count and validation score
- Sources used with confidence ratings
- Preview of key sections
- Clear action options: approve, view full, edit, reject

### Approval Actions

- **approve/ok/yes:** Proceed to commit phase
- **view/show:** Display complete artifact, then re-present options
- **edit [section]:** Regenerate specified section, re-validate, re-present
- **reject [reason]:** Record feedback in MEMORY.md, offer retry option
- **cancel:** Abort without recording (except interaction log)

### Autonomy Levels

Default autonomy level: **A2 (Collaborator)**

| Level | Behavior | Use Case |
|-------|----------|----------|
| A1 | Approve each action including reads | High-security contexts |
| A2 | Approve creations; reads auto-execute | **Default** |
| A3 | Approve new skills; updates auto-execute | Trusted workflows |
| A4 | Approve complete plans (batch) | Supervised automation |
| A5 | Audit-only, no real-time gates | Monitoring mode |

## Governance

### Constitutional Authority

This constitution supersedes all other operational guidance when conflicts arise.
All agents, skills, and workflows MUST comply with these principles.

### Amendment Procedure

1. **Proposal:** Document proposed change with rationale
2. **Impact Analysis:** Identify affected templates, skills, and workflows
3. **Review Period:** Minimum 24 hours for non-critical changes
4. **Approval:** Explicit human approval required
5. **Migration:** Update all dependent artifacts before amendment takes effect
6. **Documentation:** Record change in Sync Impact Report header

### Versioning Policy

Constitution versions follow semantic versioning:
- **MAJOR (X.0.0):** Principle removal, backward-incompatible governance changes
- **MINOR (X.Y.0):** New principle, material section expansion
- **PATCH (X.Y.Z):** Clarifications, typo fixes, non-semantic refinements

### Compliance Review

- All implementation plans MUST include a Constitution Check section
- Violations MUST be justified in the Complexity Tracking table
- Periodic audits SHOULD verify active skills conform to current principles
- Non-compliant artifacts SHOULD be flagged for update or deprecation

### Conflict Resolution

When principles conflict:
1. Human-in-the-Loop takes precedence (Principle I)
2. Safety and correctness over convenience
3. Explicit over implicit behavior
4. Simpler over complex when outcomes equivalent

**Version**: 1.0.0 | **Ratified**: 2026-02-02 | **Last Amended**: 2026-02-02

